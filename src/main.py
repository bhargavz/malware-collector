#!/usr/bin/python3.4

import tweepy
from MalwareCollector import TweetHistory
from MalwareCollector import MalwareStreamListener
import MalwareCollector
import sys
import urllib3
import requests

urllib3.disable_warnings()

if len(sys.argv) != 3:
    sys.stderr.write("""
    Usage:
    ./%s -m stream|history
    \n""" % sys.argv[0])
    sys.exit(1)


if sys.argv[2] == 'stream':
    auth = MalwareCollector.createAuth()
    mc = tweepy.streaming.Stream(auth, MalwareStreamListener())

while(True):
    try:
        #mc.filter(track=['RihannaNoRockInRio'])
        mc.filter(track=['XuxaNaRecord'])
    except requests.packages.urllib3.exceptions.ProtocolError:
        continue

