#!/usr/bin/python3.4

import tweepy
from MalwareCollector import TweetHistory
from MalwareCollector import MalwareStreamListener
import MalwareCollector
from db import DB
import sys
import ssl
import urllib3
from httplib import IncompleteRead

urllib3.disable_warnings()

if len(sys.argv) != 3:
    sys.stderr.write("""
    Usage:
    ./%s -m stream|history
    \n""" % sys.argv[0])
    sys.exit(1)


if sys.argv[2] == 'stream':
    auth = MalwareCollector.createAuth()
    mc = tweepy.streaming.Stream(auth, MalwareStreamListener())


try:
    mc.filter(track=['RihannaNoRockInRio'])
except IncompleRead:
    pass

